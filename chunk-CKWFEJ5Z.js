import{a as c}from"./chunk-LWMDNRM2.js";import{b as S}from"./chunk-CVU5FZDJ.js";import{A as l,O as u,R as p,W as m,j as U,n,r as a}from"./chunk-YJ3CRJMJ.js";var g=class o{constructor(r){this.http=r}currentUserSubject=new U(this.getStoredUser());currentUser$=this.currentUserSubject.asObservable();get currentUserValue(){return this.currentUserSubject.value}getStoredUser(){let r=localStorage.getItem("CURRENT_USER");return r?JSON.parse(r):null}login(r,s){let i=`${c.BASE_URL}/Auth/login`;return this.http.post(i,{Email:r,Password:s}).pipe(a(t=>this.normalizeUser(t)),u(t=>{localStorage.setItem("CURRENT_USER",JSON.stringify(t)),this.currentUserSubject.next(t)}),l(t=>n(()=>t)))}register(r,s,i){let t=`${c.BASE_URL}/Auth/register`;return this.http.post(t,{fullName:r,email:s,password:i}).pipe(a(e=>this.normalizeUser(e)),u(e=>{localStorage.setItem("CURRENT_USER",JSON.stringify(e)),this.currentUserSubject.next(e)}),l(e=>n(()=>e)))}logout(){localStorage.removeItem("CURRENT_USER"),this.currentUserSubject.next(null)}isLoggedIn(){return!!this.currentUserSubject.value}normalizeUser(r){return{id:r.user.userID,name:r.user.fullName,email:r.user.email,token:r.token}}static \u0275fac=function(s){return new(s||o)(m(S))};static \u0275prov=p({token:o,factory:o.\u0275fac,providedIn:"root"})};export{g as a};
