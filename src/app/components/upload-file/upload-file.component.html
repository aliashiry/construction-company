<div class="upload-page-wrapper">
  <!-- Loading Component -->
  <app-loading *ngIf="isLoading" message="Ø¬Ø§Ø±ÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† ÙØ¶Ù„Ùƒ Ø§Ù†ØªØ¸Ø±"></app-loading>

  <!-- Results Section -->
  <div *ngIf="showResults && csvData.length > 0" class="results-full-page">
    <div class="results-container">
      <div class="results-header">
        <h1>Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©</h1>
        <p *ngIf="successMessage" class="success-alert">{{ successMessage }}</p>
      </div>

      <div class="table-wrapper">
      <table class="results-table">
          <thead>
        <tr>
      <th *ngFor="let header of csvHeaders">{{ header }}</th>
   </tr>
          </thead>
          <tbody>
    <tr *ngFor="let row of csvData">
              <td *ngFor="let header of csvHeaders">{{ row[header] }}</td>
       </tr>
   </tbody>
        </table>
      </div>

      <div class="results-actions">
        <button class="btn-restart" (click)="resetForm()">Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ù„Ù Ø¬Ø¯ÙŠØ¯</button>
        <button class="btn-home" (click)="goHome()">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
      </div>
</div>
  </div>

<!-- Form Section -->
  <div *ngIf="!showResults" class="upload-form-full-page">
    <div class="form-container">
      <div class="form-header">
        <h1>Upload <span class="highlight">Project Files</span></h1>
        <p>Share your DXF/DWG files with our engineering team</p>
      </div>

      <div class="form-body">
        <!-- Error Messages -->
        <div *ngIf="errorMessage" class="alert alert-error">
{{ errorMessage }}
        </div>

        <!-- Success Messages -->
   <div *ngIf="successMessage" class="alert alert-success">
          {{ successMessage }}
        </div>

        <form id="uploadForm" (submit)="onSubmit($event)">
      <!-- Project Name -->
          <div class="form-group">
     <label for="projectName">
     Project Name
    <span class="required">*</span>
            </label>
            <input 
              type="text" 
         id="projectName" 
          name="projectName" 
     class="form-control"
   [(ngModel)]="fileStorage.ProjectName" 
  placeholder="Enter your project name" 
    required
   [disabled]="isLoading"
            >
    </div>

    <!-- File Name -->
 <div class="form-group">
        <label for="fileName">
File Name
       <span class="required">*</span>
    </label>
    <input 
              type="text" 
     id="fileName" 
  name="fileName" 
              class="form-control" 
    [(ngModel)]="selectedFileName" 
   placeholder="Enter file name or it will be auto-filled"
     [disabled]="isLoading"
          >
       <small class="help-text">ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø¯ÙŠÙ„ Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„</small>
       </div>

          <!-- File Upload -->
          <div class="form-group">
         <label>
              Upload File
       <span class="required">*</span>
       </label>
            <div class="file-upload-wrapper" [class.has-file]="fileStorage.InputFileData">
         <input 
     type="file" 
  id="fileInput" 
 class="file-upload-input" 
                accept=".dxf,.dwg"
 (change)="onFileSelected($event)"
    [disabled]="isLoading"
  >
              <div class="file-upload-icon">ğŸ“</div>
              <div class="file-upload-text">
<strong>Click to upload</strong> or drag and drop<br>
     <small>DXF or DWG files only</small>
   </div>
            </div>

            <!-- Show current file from service -->
         <div *ngIf="fileStorage.InputFileData" class="file-info">
     <div class="file-name">
       <span class="file-icon">ğŸ“„</span>
             {{ fileStorage.FileName }}
              </div>
  <button 
 type="button" 
   class="btn-remove" 
    (click)="removeFile()"
         [disabled]="isLoading"
       >
      Remove
 </button>
            </div>

            <div class="help-text">Maximum file size: 50MB</div>
</div>

  <!-- Notes -->
    <div class="form-group">
       <label for="notes">Notes (Optional)</label>
            <textarea 
          id="notes" 
           name="notes" 
           class="form-control"
            [(ngModel)]="fileStorage.Notes" 
         placeholder="Add any additional notes or requirements..."
      [disabled]="isLoading"
            ></textarea>
          </div>

        <!-- Submit Button -->
   <button 
            type="submit" 
            class="btn-submit" 
 id="submitBtn" 
      [disabled]="isUploading || isLoading"
          >
  {{ isLoading ? 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...' : 'Upload Project Files' }}
          </button>
        </form>
      </div>
    </div>
  </div>
</div>
