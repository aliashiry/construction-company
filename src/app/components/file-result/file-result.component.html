<div class="container" [ngSwitch]="getStatus()">

  <!-- Loading State -->
  <div *ngSwitchCase="'loading'" class="loading">
    <div class="spinner"></div>
    <p>{{ message }}</p>
  </div>

  <!-- Error State -->
  <div *ngSwitchCase="'error'" class="error">
    <h2>Error</h2>
    <p>{{ errorMessage }}</p>
    <button (click)="goHome()">Go Home</button>
    <button (click)="goBack()">Try Again</button>
  </div>

  <!-- Success State -->
  <div *ngSwitchCase="'done'" class="results">
    <!-- Header Row with Info and Buttons -->
    <div class="results-header">
      <div class="file-info">
        <span class="info-item"><strong>Project:</strong> {{ projectName }}</span>
        <span class="info-item"><strong>File:</strong> {{ fileName }}</span>
      </div>
      <div class="file-actions">
        <button (click)="downloadOutputFile()" class="btn btn-primary">
          <span class="btn-icon">ðŸ“¥</span> Download Output
        </button>
        <button (click)="downloadAllFiles()" class="btn btn-secondary">
          <span class="btn-icon">ðŸ“¦</span> Download All
        </button>
      </div>
    </div>

    <!-- Table -->
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th *ngFor="let header of csvHeaders">{{ header }}</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let row of csvData">
            <td *ngFor="let header of csvHeaders">{{ row[header] }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="actions">
      <button (click)="goBack()" class="btn-action">Upload New File</button>
      <button (click)="goHome()" class="btn-action">Go Home</button>
    </div>
  </div>

</div>