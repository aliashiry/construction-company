import{a as p}from"./chunk-3O4E2BZ4.js";import{b as s,c as l}from"./chunk-ZT6EOFWV.js";import{R as o,W as u,r as i}from"./chunk-WHKR5R2A.js";var m=class a{constructor(t){this.http=t}currentFile=null;currentData=null;API_BASE_URL=`${p.BASE_URL}/history`;setFileStorage(t){this.currentData=t,this.currentFile=t.InputFileData}getFileStorage(){return this.currentData??null}clearFile(){this.currentFile=null,this.currentData&&(this.currentData.InputFileData=null)}submitToInput(t,e){let r=new FormData;t.InputFileData&&r.append("inputFile",t.InputFileData,t.InputFileData.name);let n=new URLSearchParams({userId:t.UserID.toString(),projectName:t.ProjectName,fileName:t.FileName,notes:t.Notes||"",forwardUrl:"https://hetask15.app.n8n.cloud/webhook/upload-file-dxf"});return this.http.post(`${this.API_BASE_URL}/input?${n.toString()}`,r)}checkOutput(t,e,r){let n=new s().set("userId",t).set("projectName",e).set("fileName",r);return this.http.get(`${this.API_BASE_URL}/output/base64`,{params:n})}getOutputFile(t,e,r){let n=new s().set("userId",t).set("projectName",e).set("fileName",r);return this.http.get(`${this.API_BASE_URL}/output/base64`,{params:n})}checkOutputStatus(t,e,r){let n=new s().set("userId",t).set("projectName",e).set("fileName",r);return this.http.get(`${this.API_BASE_URL}/output/status`,{params:n})}getOutputFileBase64(t,e,r){return this.http.get(`${this.API_BASE_URL}/output/base64`,{params:{userId:t,projectName:e,fileName:r}})}downloadOutputFile(t,e,r){return this.http.get(`${this.API_BASE_URL}/output/download`,{params:{userId:t,projectName:e,fileName:r},responseType:"blob"})}downloadAllFiles(t,e,r){return this.http.get(`${this.API_BASE_URL}/download/all`,{params:{userId:t.toString(),projectName:e,fileName:r},responseType:"blob"})}getFullFileData(t){let e=new s().set("userId",t.toString());return this.http.get(`${this.API_BASE_URL}/files/full-data`,{params:e})}getFullFileData2(t,e){let r=new s().set("userId",t.toString()).set("projectName",e);return this.http.get(`${this.API_BASE_URL}/files`,{params:r})}getAllProjects(t){let e=new s().set("userId",t.toString());return this.http.get(`${this.API_BASE_URL}/projects`,{params:e})}getProjectsCount(t){let e=new s().set("userId",t.toString());return this.http.get(`${this.API_BASE_URL}/projects`,{params:e})}getFilesCountByProject(t,e){let r=new s().set("userId",t.toString());return this.http.get(`${this.API_BASE_URL}/projects/count`,{params:r}).pipe(i(n=>n.projectCount))}getFilesCount(t){let e=new s().set("userId",t.toString());return this.http.get(`${this.API_BASE_URL}/files/totalcount`,{params:e}).pipe(i(r=>r.fileCount))}static \u0275fac=function(e){return new(e||a)(u(l))};static \u0275prov=o({token:a,factory:a.\u0275fac,providedIn:"root"})};export{m as a};
