import{a as u}from"./chunk-3O4E2BZ4.js";import{c as g}from"./chunk-XJODJNO7.js";import{A as l,O as p,R as m,W as U,j as c,n as i,r as a}from"./chunk-THL5O2XT.js";var S=class n{constructor(r){this.http=r}currentUserSubject=new c(this.getStoredUser());currentUser$=this.currentUserSubject.asObservable();get currentUserValue(){return this.currentUserSubject.value}getStoredUser(){let r=localStorage.getItem("CURRENT_USER");return r?JSON.parse(r):null}login(r,t){let s=`${u.BASE_URL}/Auth/login`;return this.http.post(s,{Email:r,Password:t}).pipe(a(e=>this.normalizeUser(e)),p(e=>{localStorage.setItem("CURRENT_USER",JSON.stringify(e)),this.currentUserSubject.next(e)}),l(e=>i(()=>e)))}register(r,t,s){let e=`${u.BASE_URL}/Auth/register`;return this.http.post(e,{fullName:r,email:t,password:s}).pipe(a(o=>o),l(o=>(console.error("Register error:",o),i(()=>o.error?.message||"Registration failed"))))}logout(){localStorage.removeItem("CURRENT_USER"),this.currentUserSubject.next(null)}isLoggedIn(){return!!this.currentUserSubject.value}normalizeUser(r){return{id:r.user.userID,name:r.user.fullName,email:r.user.email,token:r.token}}static \u0275fac=function(t){return new(t||n)(U(g))};static \u0275prov=m({token:n,factory:n.\u0275fac,providedIn:"root"})};export{S as a};
