import{a as U}from"./chunk-6FXQG64G.js";import{g as F,k as I}from"./chunk-YHKXDJLI.js";import{$a as D,Aa as g,Eb as T,Fb as y,Ka as _,Na as C,Oa as f,Pa as P,Qa as o,Ra as r,Sa as b,Va as v,Wa as l,Xa as m,Ya as S,Z as k,Za as a,eb as O,fa as c,ga as p,ha as x,ia as w,na as M,za as u}from"./chunk-SYYUT3UE.js";function L(d,e){if(d&1&&(o(0,"p",15),a(1),r()),d&2){let t=m();u(),D("Uploaded: ",t.uploadedFile.name,"")}}function V(d,e){if(d&1){let t=v();o(0,"div",16),l("click",function(){c(t);let i=m();return p(i.closeModal())}),o(1,"div",17),l("click",function(i){return c(t),p(i.stopPropagation())}),o(2,"p",18),a(3,"You must log in first to upload files."),r(),o(4,"div",19)(5,"button",20),l("click",function(){c(t);let i=m();return p(i.goToLogin())}),a(6,"Login"),r(),o(7,"button",21),l("click",function(){c(t);let i=m();return p(i.goToRegister())}),a(8,"Register"),r()()()()}}var E=class d{constructor(e,t,n){this.authService=e;this.router=t;this.uploadService=n}isDarkTheme=!0;fileSelected=new M;isDragging=!1;showAuthModal=!1;uploadedFile=null;triggerFileInput(e){this.authService.isLoggedIn()?e.click():this.showAuthModal=!0}onFileSelected(e){let t=e.target;t.files&&t.files.length>0&&(this.uploadedFile=t.files[0],this.uploadService.setFileStorage({UserID:123,ProjectName:"",FileName:t.files[0].name,InputFileData:t.files[0],Notes:""}),this.fileSelected.emit(t.files[0]))}removeFile(){this.uploadedFile=null,this.uploadService.clearFile()}onDragOver(e){e.preventDefault(),e.stopPropagation(),this.isDragging=!0}onDragLeave(e){e.preventDefault(),e.stopPropagation(),this.isDragging=!1}onDrop(e){if(e.preventDefault(),e.stopPropagation(),this.isDragging=!1,!this.authService.isLoggedIn()){this.showAuthModal=!0;return}e.dataTransfer?.files&&e.dataTransfer.files.length>0&&(this.uploadedFile=e.dataTransfer.files[0],this.uploadService.setFileStorage({UserID:123,ProjectName:"",FileName:e.dataTransfer.files[0].name,InputFileData:e.dataTransfer.files[0],Notes:""}),this.fileSelected.emit(e.dataTransfer.files[0]))}closeModal(){this.showAuthModal=!1}goToLogin(){this.showAuthModal=!1,this.router.navigate(["/login"])}goToRegister(){this.showAuthModal=!1,this.router.navigate(["/register"])}static \u0275fac=function(t){return new(t||d)(g(I),g(F),g(U))};static \u0275cmp=k({type:d,selectors:[["app-upload-center"]],hostBindings:function(t,n){t&1&&l("dragover",function(s){return n.onDragOver(s)})("dragleave",function(s){return n.onDragLeave(s)})("drop",function(s){return n.onDrop(s)})},inputs:{isDarkTheme:"isDarkTheme"},outputs:{fileSelected:"fileSelected"},standalone:!0,features:[O],decls:21,vars:14,consts:[["fileInput",""],[1,"upload-center-card"],[1,"upload-center-title"],[1,"upload-center-subtitle"],[1,"upload-center-icon"],["width","64","height","64","viewBox","0 0 64 64","fill","none","xmlns","http://www.w3.org/2000/svg"],["x","8","y","16","width","40","height","32","rx","4","stroke","#f97316","stroke-width","3","fill","none"],["cx","20","cy","32","r","5","stroke","#f97316","stroke-width","2","fill","none"],["d","M8 40 L20 30 L30 38 L40 26 L48 34","stroke","#f97316","stroke-width","2","fill","none"],["d","M44 20 L52 12 M52 12 L52 20 M52 12 L44 12","stroke","#f97316","stroke-width","3","stroke-linecap","round","stroke-linejoin","round"],[1,"upload-center-drag-text"],["type","file","accept",".dxf,.dwg","hidden","",3,"change"],[1,"upload-center-button",3,"click"],["class","upload-center-success",4,"ngIf"],["class","upload-auth-modal-overlay",3,"click",4,"ngIf"],[1,"upload-center-success"],[1,"upload-auth-modal-overlay",3,"click"],[1,"upload-auth-modal",3,"click"],[1,"upload-auth-modal-message"],[1,"upload-auth-modal-buttons"],[1,"upload-auth-modal-btn","upload-auth-modal-btn-login",3,"click"],[1,"upload-auth-modal-btn","upload-auth-modal-btn-register",3,"click"]],template:function(t,n){if(t&1){let i=v();o(0,"div",1)(1,"h2",2),a(2," Upload Your Project Blueprint"),b(3,"br"),a(4," (Architectural Plans & Designs) "),r(),o(5,"p",3),a(6,"Quick and seamless upload"),r(),o(7,"div",4),x(),o(8,"svg",5),b(9,"rect",6)(10,"circle",7)(11,"path",8)(12,"path",9),r()(),w(),o(13,"p",10),a(14,"Drag and drop your files here"),r(),o(15,"input",11,0),l("change",function(h){return c(i),p(n.onFileSelected(h))}),r(),o(17,"button",12),l("click",function(){c(i);let h=S(16);return p(n.triggerFileInput(h))}),a(18," Upload Files "),r(),_(19,L,2,1,"p",13),r(),_(20,V,9,0,"div",14)}t&2&&(P("dragging",n.isDragging)("light-mode",!n.isDarkTheme)("dark-mode",n.isDarkTheme),u(),f("color",n.isDarkTheme?"#f97316":"#ea580c"),u(4),f("color",n.isDarkTheme?"#94a3b8":"#6b7280"),u(8),f("color",n.isDarkTheme?"#94a3b8":"#6b7280"),u(6),C("ngIf",n.uploadedFile),u(),C("ngIf",n.showAuthModal))},dependencies:[y,T],styles:[".upload-center-card[_ngcontent-%COMP%]{background:#fff;border-radius:24px;padding:2.5rem 3rem;max-width:420px;width:100%;margin:0 auto;text-align:center;box-shadow:0 6px 30px #0206170f;transition:border .2s;border:2px dashed transparent}.upload-center-card.dragging[_ngcontent-%COMP%]{border-color:#f97316;background:#fff}.upload-center-card.dark-mode[_ngcontent-%COMP%]{background:#0b1220;border-color:#ffffff08;box-shadow:0 10px 30px #02061780}@media (max-width: 480px){.upload-center-card[_ngcontent-%COMP%]{padding:1.5rem 1rem;max-width:90%}}.upload-center-title[_ngcontent-%COMP%]{color:#f97316;font-size:1.15rem;font-weight:700;margin:0 0 1.5rem;line-height:1.4}@media (max-width: 480px){.upload-center-title[_ngcontent-%COMP%]{font-size:1rem}}.upload-center-subtitle[_ngcontent-%COMP%]{color:#6b7280;font-size:.85rem;margin:0 0 .5rem}.upload-center-icon[_ngcontent-%COMP%]{margin:1rem auto;display:flex;justify-content:center}.upload-center-drag-text[_ngcontent-%COMP%]{color:#6b7280;font-size:.85rem;margin:1rem 0 1.5rem}.upload-center-card.dark-mode[_ngcontent-%COMP%]   .upload-center-title[_ngcontent-%COMP%], .upload-center-card.dark-mode[_ngcontent-%COMP%]   .upload-center-subtitle[_ngcontent-%COMP%], .upload-center-card.dark-mode[_ngcontent-%COMP%]   .upload-center-drag-text[_ngcontent-%COMP%]{color:#ffffffe6}.upload-center-button[_ngcontent-%COMP%]{display:inline-block;background:#f97316;color:#fff;padding:.75rem 2rem;border-radius:24px;font-size:1rem;font-weight:500;cursor:pointer;border:none;transition:background .2s}.upload-center-button[_ngcontent-%COMP%]:hover{background:#ea580c}.upload-center-success[_ngcontent-%COMP%]{color:#16a34a;font-size:.85rem;margin-top:1rem}.upload-auth-modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0206170f;display:flex;align-items:center;justify-content:center;z-index:1000}.upload-auth-modal[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:2rem;max-width:360px;width:90%;text-align:center;box-shadow:0 10px 40px #02061714}.upload-auth-modal-message[_ngcontent-%COMP%]{color:#0f172a;font-size:1rem;margin:0 0 1.5rem}.upload-auth-modal-buttons[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center;flex-wrap:wrap}.upload-auth-modal-btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:24px;font-size:.95rem;font-weight:600;cursor:pointer;border:none;transition:background .2s}.upload-auth-modal-btn-login[_ngcontent-%COMP%]{background:#f97316;color:#fff}.upload-auth-modal-btn-login[_ngcontent-%COMP%]:hover{background:#ea580c}.upload-auth-modal-btn-register[_ngcontent-%COMP%]{background:#e6eef6;color:#0f172a}.upload-auth-modal-btn-register[_ngcontent-%COMP%]:hover{background:#d1e2f1}"],changeDetection:0})};export{E as a};
