import{a as p}from"./chunk-APXEHMAM.js";import{a as n,b as l}from"./chunk-CVU5FZDJ.js";import{R as o,W as u,r as i}from"./chunk-YJ3CRJMJ.js";var m=class a{constructor(t){this.http=t}currentFile=null;currentData=null;API_BASE_URL=`${p.BASE_URL}/history`;setFileStorage(t){this.currentData=t,this.currentFile=t.InputFileData}getFileStorage(){return this.currentData??null}clearFile(){this.currentFile=null,this.currentData&&(this.currentData.InputFileData=null)}submitToInput(t,e){let r=new FormData;t.InputFileData&&r.append("inputFile",t.InputFileData,t.InputFileData.name);let s=new URLSearchParams({userId:t.UserID.toString(),projectName:t.ProjectName,fileName:t.FileName,notes:t.Notes||"",forwardUrl:e||"https://hshama7md15.app.n8n.cloud/webhook/upload-file-dxf"});return this.http.post(`${this.API_BASE_URL}/input?${s.toString()}`,r)}checkOutput(t,e,r){let s=new n().set("userId",t).set("projectName",e).set("fileName",r);return this.http.get(`${this.API_BASE_URL}/output/base64`,{params:s})}getOutputFile(t,e,r){let s=new n().set("userId",t).set("projectName",e).set("fileName",r);return this.http.get(`${this.API_BASE_URL}/output/base64`,{params:s})}checkOutputStatus(t,e,r){let s=new n().set("userId",t).set("projectName",e).set("fileName",r);return this.http.get(`${this.API_BASE_URL}/output/status`,{params:s})}getOutputFileBase64(t,e,r){return this.http.get(`${this.API_BASE_URL}/output/base64`,{params:{userId:t,projectName:e,fileName:r}})}downloadOutputFile(t,e,r){return this.http.get(`${this.API_BASE_URL}/output/download`,{params:{userId:t,projectName:e,fileName:r},responseType:"blob"})}downloadAllFiles(t,e,r){return this.http.get(`${this.API_BASE_URL}/download/all`,{params:{userId:t.toString(),projectName:e,fileName:r},responseType:"blob"})}getFullFileData(t){let e=new n().set("userId",t.toString());return this.http.get(`${this.API_BASE_URL}/files/full-data`,{params:e})}getAllProjects(t){let e=new n().set("userId",t.toString());return this.http.get(`${this.API_BASE_URL}/projects`,{params:e})}getProjectsCount(t){let e=new n().set("userId",t.toString());return this.http.get(`${this.API_BASE_URL}/projects/count`,{params:e})}getFilesCountByProject(t,e){let r=new n().set("userId",t.toString());return this.http.get(`${this.API_BASE_URL}/projects/count`,{params:r}).pipe(i(s=>s.projectCount))}getFilesCount(t){let e=new n().set("userId",t.toString());return this.http.get(`${this.API_BASE_URL}/files/totalcount`,{params:e}).pipe(i(r=>r.fileCount))}static \u0275fac=function(e){return new(e||a)(u(l))};static \u0275prov=o({token:a,factory:a.\u0275fac,providedIn:"root"})};export{m as a};
